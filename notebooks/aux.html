<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Auxiliary Samplers &mdash; popsynth  documentation</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../_static/sg_gallery.css" type="text/css" />
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
        <script src="https://unpkg.com/@jupyter-widgets/html-manager@^0.20.1/dist/embed-amd.js"></script>
        <script>window.MathJax = {"tex": {"inlineMath": [["$", "$"], ["\\(", "\\)"]], "processEscapes": true}, "options": {"ignoreHtmlClass": "tex2jax_ignore|mathjax_ignore|document", "processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
        <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Contributing" href="contribute.html" />
    <link rel="prev" title="Selections" href="selections.html" />
  <link rel="stylesheet" href="../_static/pygments/default.css" type="text/css" id="pygments-style">
  <link rel="stylesheet" href="../_static/custom.css" type="text/css">
   

</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../index.html" class="icon icon-home"> popsynth
            <img src="../_static/logo.png" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="quickstart.html">Quick start</a></li>
<li class="toctree-l1"><a class="reference internal" href="concept.html">Core Concept</a></li>
<li class="toctree-l1"><a class="reference internal" href="distributions.html">Distributions</a></li>
<li class="toctree-l1"><a class="reference internal" href="custom.html">Custom distributions and populations</a></li>
<li class="toctree-l1"><a class="reference internal" href="selections.html">Selections</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Auxiliary Samplers</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#Built-in-auxiliary-samplers">Built in auxiliary samplers</a></li>
<li class="toctree-l2"><a class="reference internal" href="#Creating-a-custom-auxiliary-sampler">Creating a custom auxiliary sampler</a></li>
<li class="toctree-l2"><a class="reference internal" href="#Observed-auxiliary-properties-and-dependent-parameters">Observed auxiliary properties and dependent parameters</a></li>
<li class="toctree-l2"><a class="reference internal" href="#Derived-Luminosity-sampler">Derived Luminosity sampler</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="contribute.html">Contributing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api/API.html">API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api/API.html#popsynth">popsynth</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Examples:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="short_grbs.html">Short GRBS</a></li>
<li class="toctree-l1"><a class="reference internal" href="bl_lacs.html">BL Lac blazars</a></li>
<li class="toctree-l1"><a class="reference internal" href="stellar_mass.html">Stellar Mass-Luminosity Bias</a></li>
<li class="toctree-l1"><a class="reference internal" href="milkyway.html">Fun with the Milky Way</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">popsynth</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
  <!--
  <div class="admonition note">
    <p><a href="https://github.com/lukelbd">ProPlot author here</a>: Due to my day job as a graduate student, certain <a href="https://github.com/lukelbd/proplot/pulls?q=is%3Aopen+is%3Apr">feature additions</a> may be delayed to the summer of 2020. In the meantime, if you are interested in contributing to ProPlot, please see the <a href="https://proplot.readthedocs.io/en/latest/contributions.html">contribution guide</a>. Any amount of help is welcome!
    </p>
  </div>
  -->
  <li id="lightdark-li">
    <label for="lightdark-checkbox" id="lightdark-label">
      <input type="checkbox" id="lightdark-checkbox"/>
      <div class="btn-neutral"></div>
    </label>
  </li>
  
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
      <li>Auxiliary Samplers</li>

      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
  <script type="text/javascript" src=../_static/custom.js></script>
  
           <div itemprop="articleBody">
             
  
<style>
/* CSS for nbsphinx extension */

/* remove conflicting styling from Sphinx themes */
div.nbinput.container div.prompt *,
div.nboutput.container div.prompt *,
div.nbinput.container div.input_area pre,
div.nboutput.container div.output_area pre,
div.nbinput.container div.input_area .highlight,
div.nboutput.container div.output_area .highlight {
    border: none;
    padding: 0;
    margin: 0;
    box-shadow: none;
}

div.nbinput.container > div[class*=highlight],
div.nboutput.container > div[class*=highlight] {
    margin: 0;
}

div.nbinput.container div.prompt *,
div.nboutput.container div.prompt * {
    background: none;
}

div.nboutput.container div.output_area .highlight,
div.nboutput.container div.output_area pre {
    background: unset;
}

div.nboutput.container div.output_area div.highlight {
    color: unset;  /* override Pygments text color */
}

/* avoid gaps between output lines */
div.nboutput.container div[class*=highlight] pre {
    line-height: normal;
}

/* input/output containers */
div.nbinput.container,
div.nboutput.container {
    display: -webkit-flex;
    display: flex;
    align-items: flex-start;
    margin: 0;
    width: 100%;
}
@media (max-width: 540px) {
    div.nbinput.container,
    div.nboutput.container {
        flex-direction: column;
    }
}

/* input container */
div.nbinput.container {
    padding-top: 5px;
}

/* last container */
div.nblast.container {
    padding-bottom: 5px;
}

/* input prompt */
div.nbinput.container div.prompt pre {
    color: #307FC1;
}

/* output prompt */
div.nboutput.container div.prompt pre {
    color: #BF5B3D;
}

/* all prompts */
div.nbinput.container div.prompt,
div.nboutput.container div.prompt {
    width: 4.5ex;
    padding-top: 5px;
    position: relative;
    user-select: none;
}

div.nbinput.container div.prompt > div,
div.nboutput.container div.prompt > div {
    position: absolute;
    right: 0;
    margin-right: 0.3ex;
}

@media (max-width: 540px) {
    div.nbinput.container div.prompt,
    div.nboutput.container div.prompt {
        width: unset;
        text-align: left;
        padding: 0.4em;
    }
    div.nboutput.container div.prompt.empty {
        padding: 0;
    }

    div.nbinput.container div.prompt > div,
    div.nboutput.container div.prompt > div {
        position: unset;
    }
}

/* disable scrollbars on prompts */
div.nbinput.container div.prompt pre,
div.nboutput.container div.prompt pre {
    overflow: hidden;
}

/* input/output area */
div.nbinput.container div.input_area,
div.nboutput.container div.output_area {
    -webkit-flex: 1;
    flex: 1;
    overflow: auto;
}
@media (max-width: 540px) {
    div.nbinput.container div.input_area,
    div.nboutput.container div.output_area {
        width: 100%;
    }
}

/* input area */
div.nbinput.container div.input_area {
    border: 1px solid #e0e0e0;
    border-radius: 2px;
    /*background: #f5f5f5;*/
}

/* override MathJax center alignment in output cells */
div.nboutput.container div[class*=MathJax] {
    text-align: left !important;
}

/* override sphinx.ext.imgmath center alignment in output cells */
div.nboutput.container div.math p {
    text-align: left;
}

/* standard error */
div.nboutput.container div.output_area.stderr {
    background: #fdd;
}

/* ANSI colors */
.ansi-black-fg { color: #3E424D; }
.ansi-black-bg { background-color: #3E424D; }
.ansi-black-intense-fg { color: #282C36; }
.ansi-black-intense-bg { background-color: #282C36; }
.ansi-red-fg { color: #E75C58; }
.ansi-red-bg { background-color: #E75C58; }
.ansi-red-intense-fg { color: #B22B31; }
.ansi-red-intense-bg { background-color: #B22B31; }
.ansi-green-fg { color: #00A250; }
.ansi-green-bg { background-color: #00A250; }
.ansi-green-intense-fg { color: #007427; }
.ansi-green-intense-bg { background-color: #007427; }
.ansi-yellow-fg { color: #DDB62B; }
.ansi-yellow-bg { background-color: #DDB62B; }
.ansi-yellow-intense-fg { color: #B27D12; }
.ansi-yellow-intense-bg { background-color: #B27D12; }
.ansi-blue-fg { color: #208FFB; }
.ansi-blue-bg { background-color: #208FFB; }
.ansi-blue-intense-fg { color: #0065CA; }
.ansi-blue-intense-bg { background-color: #0065CA; }
.ansi-magenta-fg { color: #D160C4; }
.ansi-magenta-bg { background-color: #D160C4; }
.ansi-magenta-intense-fg { color: #A03196; }
.ansi-magenta-intense-bg { background-color: #A03196; }
.ansi-cyan-fg { color: #60C6C8; }
.ansi-cyan-bg { background-color: #60C6C8; }
.ansi-cyan-intense-fg { color: #258F8F; }
.ansi-cyan-intense-bg { background-color: #258F8F; }
.ansi-white-fg { color: #C5C1B4; }
.ansi-white-bg { background-color: #C5C1B4; }
.ansi-white-intense-fg { color: #A1A6B2; }
.ansi-white-intense-bg { background-color: #A1A6B2; }

.ansi-default-inverse-fg { color: #FFFFFF; }
.ansi-default-inverse-bg { background-color: #000000; }

.ansi-bold { font-weight: bold; }
.ansi-underline { text-decoration: underline; }


div.nbinput.container div.input_area div[class*=highlight] > pre,
div.nboutput.container div.output_area div[class*=highlight] > pre,
div.nboutput.container div.output_area div[class*=highlight].math,
div.nboutput.container div.output_area.rendered_html,
div.nboutput.container div.output_area > div.output_javascript,
div.nboutput.container div.output_area:not(.rendered_html) > img{
    padding: 5px;
    margin: 0;
}

/* fix copybtn overflow problem in chromium (needed for 'sphinx_copybutton') */
div.nbinput.container div.input_area > div[class^='highlight'],
div.nboutput.container div.output_area > div[class^='highlight']{
    overflow-y: hidden;
}

/* hide copybtn icon on prompts (needed for 'sphinx_copybutton') */
.prompt .copybtn {
    display: none;
}

/* Some additional styling taken form the Jupyter notebook CSS */
div.rendered_html table {
  border: none;
  border-collapse: collapse;
  border-spacing: 0;
  color: black;
  font-size: 12px;
  table-layout: fixed;
}
div.rendered_html thead {
  border-bottom: 1px solid black;
  vertical-align: bottom;
}
div.rendered_html tr,
div.rendered_html th,
div.rendered_html td {
  text-align: right;
  vertical-align: middle;
  padding: 0.5em 0.5em;
  line-height: normal;
  white-space: normal;
  max-width: none;
  border: none;
}
div.rendered_html th {
  font-weight: bold;
}
div.rendered_html tbody tr:nth-child(odd) {
  background: #f5f5f5;
}
div.rendered_html tbody tr:hover {
  background: rgba(66, 165, 245, 0.2);
}

/* CSS overrides for sphinx_rtd_theme */

/* 24px margin */
.nbinput.nblast.container,
.nboutput.nblast.container {
    margin-bottom: 19px;  /* padding has already 5px */
}

/* ... except between code cells! */
.nblast.container + .nbinput.container {
    margin-top: -19px;
}

.admonition > p:before {
    margin-right: 4px;  /* make room for the exclamation icon */
}

/* Fix math alignment, see https://github.com/rtfd/sphinx_rtd_theme/pull/686 */
.math {
    text-align: unset;
}
</style>
<section id="Auxiliary-Samplers">
<h1>Auxiliary Samplers<a class="headerlink" href="#Auxiliary-Samplers" title="Permalink to this headline"></a></h1>
<p>Along with sampling the spatial and luminosity distributions, auxiliary properties and be sampled that both depend on and/or influence the luminosity as well each other. This allows you to build up arbitrailiy complex dependencies between parameters which can lead to diverse populations.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[1]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><br/><span></span><span class="kn">import</span> <span class="nn">networkx</span> <span class="k">as</span> <span class="nn">nx</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>

<span class="o">%</span><span class="k">matplotlib</span> inline
<span class="kn">from</span> <span class="nn">jupyterthemes</span> <span class="kn">import</span> <span class="n">jtplot</span>

<span class="n">jtplot</span><span class="o">.</span><span class="n">style</span><span class="p">(</span><span class="n">context</span><span class="o">=</span><span class="s2">&quot;notebook&quot;</span><span class="p">,</span> <span class="n">fscale</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">grid</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

<span class="n">purple</span> <span class="o">=</span> <span class="s2">&quot;#B833FF&quot;</span>
<span class="n">yellow</span> <span class="o">=</span> <span class="s2">&quot;#F6EF5B&quot;</span>

<span class="kn">import</span> <span class="nn">warnings</span>

<span class="n">warnings</span><span class="o">.</span><span class="n">simplefilter</span><span class="p">(</span><span class="s2">&quot;ignore&quot;</span><span class="p">)</span>


<span class="kn">import</span> <span class="nn">popsynth</span>

<span class="n">popsynth</span><span class="o">.</span><span class="n">update_logging_level</span><span class="p">(</span><span class="s2">&quot;INFO&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<section id="Built-in-auxiliary-samplers">
<h2>Built in auxiliary samplers<a class="headerlink" href="#Built-in-auxiliary-samplers" title="Permalink to this headline"></a></h2>
<p>There are several built in auxiliary samplers that allow you to quickly add on auxiliary parameters.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[2]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">popsynth</span><span class="o">.</span><span class="n">list_available_auxiliary_samplers</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
DeltaAuxSampler
LogNormalAuxSampler
Log10NormalAuxSampler
NormalAuxSampler
ParetoAuxSampler
PowerLawAuxSampler
BrokenPowerLawAuxSampler
TruncatedNormalAuxSampler
ViewingAngleSampler
</pre></div></div>
</div>
<p>We can add these on to the populations, but let’s have a look at how to use them.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[3]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">x</span> <span class="o">=</span> <span class="n">popsynth</span><span class="o">.</span><span class="n">NormalAuxSampler</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;aux_param&quot;</span><span class="p">,</span> <span class="n">observed</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="n">x</span><span class="o">.</span><span class="n">mu</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">x</span><span class="o">.</span><span class="n">sigma</span> <span class="o">=</span> <span class="mi">1</span>

<span class="c1"># draws the observed values from normal distribution with std equal to tau</span>
<span class="n">x</span><span class="o">.</span><span class="n">tau</span> <span class="o">=</span> <span class="mi">1</span>
</pre></div>
</div>
</div>
<p>If value of x is observed (generates data), then we can set the width of the normal distribtuion from which the observed values are sampled from the latent values. Otherwise, only the latent values are stored. This applies to any of the built in auxiliary samplers. However, this can all be customized by adding our own:</p>
</section>
<section id="Creating-a-custom-auxiliary-sampler">
<h2>Creating a custom auxiliary sampler<a class="headerlink" href="#Creating-a-custom-auxiliary-sampler" title="Permalink to this headline"></a></h2>
<p>Let’s create two auxiliary samplers that sample values from normal distributions with some dependency on each other.</p>
<p>First, we specify the main population. This time, we will chose a SFR-like redshift distribution and a Schecter luminosity function</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[4]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">pop_gen</span> <span class="o">=</span> <span class="n">popsynth</span><span class="o">.</span><span class="n">populations</span><span class="o">.</span><span class="n">SchechterSFRPopulation</span><span class="p">(</span>
    <span class="n">r0</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span><span class="n">a</span><span class="o">=</span><span class="mf">0.0157</span><span class="p">,</span> <span class="n">rise</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">decay</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">peak</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">Lmin</span><span class="o">=</span><span class="mf">1e50</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">2.0</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
<p>Suppose we have a property “demo” that we want to sample as well. For this property, we do not observe it directly. We will get to that. This means that our property latent and could influence other parameters but we can not measure it directly. If you are familiar with Bayesian hierarchical models, this concept may be more familiar to you. As an example, this could be the temperature of a star, which influences its spectrum. The spectrum creates an observable, but the tempreature is imply a
random latent variable sampled from a distribution.</p>
<p>We create an <code class="docutils literal notranslate"><span class="pre">AuxiliarySampler</span></code> child class, and define the <em>true_sampler</em> for the latent values:</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[5]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">DemoSampler</span><span class="p">(</span><span class="n">popsynth</span><span class="o">.</span><span class="n">AuxiliarySampler</span><span class="p">):</span>
    <span class="n">_auxiliary_sampler_name</span> <span class="o">=</span> <span class="s2">&quot;DemoSampler&quot;</span>

    <span class="n">mu</span> <span class="o">=</span> <span class="n">popsynth</span><span class="o">.</span><span class="n">auxiliary_sampler</span><span class="o">.</span><span class="n">AuxiliaryParameter</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
    <span class="n">tau</span> <span class="o">=</span> <span class="n">popsynth</span><span class="o">.</span><span class="n">auxiliary_sampler</span><span class="o">.</span><span class="n">AuxiliaryParameter</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">vmin</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="c1"># pass up to the super class</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">DemoSampler</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="s2">&quot;demo&quot;</span><span class="p">,</span> <span class="n">observed</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">true_sampler</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">size</span><span class="p">):</span>

        <span class="c1"># sample the latent values for this property</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_true_values</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">normal</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">mu</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">tau</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="n">size</span><span class="p">)</span>
</pre></div>
</div>
</div>
<p>Now we instantiate it and then assign it our pop_gen object. Then we draw out survey</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[6]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">demo1</span> <span class="o">=</span> <span class="n">DemoSampler</span><span class="p">()</span>

<span class="n">pop_gen</span><span class="o">.</span><span class="n">add_observed_quantity</span><span class="p">(</span><span class="n">demo1</span><span class="p">)</span>


<span class="n">flux_selector</span> <span class="o">=</span> <span class="n">popsynth</span><span class="o">.</span><span class="n">HardFluxSelection</span><span class="p">()</span>
<span class="n">flux_selector</span><span class="o">.</span><span class="n">boundary</span> <span class="o">=</span> <span class="mf">1e-9</span>

<span class="n">pop_gen</span><span class="o">.</span><span class="n">set_flux_selection</span><span class="p">(</span><span class="n">flux_selector</span><span class="p">)</span>

<span class="n">population</span> <span class="o">=</span> <span class="n">pop_gen</span><span class="o">.</span><span class="n">draw_survey</span><span class="p">()</span>



<span class="c1">## plot it</span>
<span class="n">options</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;node_color&quot;</span><span class="p">:</span> <span class="n">purple</span><span class="p">,</span> <span class="s2">&quot;node_size&quot;</span><span class="p">:</span> <span class="mi">3000</span><span class="p">,</span> <span class="s2">&quot;width&quot;</span><span class="p">:</span> <span class="mf">0.5</span><span class="p">}</span>
<span class="n">pos</span> <span class="o">=</span> <span class="n">nx</span><span class="o">.</span><span class="n">drawing</span><span class="o">.</span><span class="n">nx_agraph</span><span class="o">.</span><span class="n">graphviz_layout</span><span class="p">(</span><span class="n">population</span><span class="o">.</span><span class="n">graph</span><span class="p">,</span> <span class="n">prog</span><span class="o">=</span><span class="s2">&quot;dot&quot;</span><span class="p">)</span>
<span class="n">nx</span><span class="o">.</span><span class="n">draw</span><span class="p">(</span><span class="n">population</span><span class="o">.</span><span class="n">graph</span><span class="p">,</span> <span class="n">with_labels</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">pos</span><span class="o">=</span><span class="n">pos</span><span class="p">,</span> <span class="o">**</span><span class="n">options</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
<span class="ansi-green-intense-fg ansi-bold"> INFO     </span>| <span class="ansi-green-intense-fg ansi-bold"> registering auxilary sampler: demo </span>
<span class="ansi-green-intense-fg ansi-bold"> INFO     </span>| <span class="ansi-green-intense-fg ansi-bold"> The volume integral is 4760.754854 </span>
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<script type="application/vnd.jupyter.widget-view+json">{"model_id": "8801009452d84a838fef94c35e1635be", "version_major": 2, "version_minor": 0}</script></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
<span class="ansi-green-intense-fg ansi-bold"> INFO     </span>| <span class="ansi-green-intense-fg ansi-bold"> Expecting 4693 total objects </span>
<span class="ansi-green-intense-fg ansi-bold"> INFO     </span>| <span class="ansi-green-intense-fg ansi-bold"> Sampling: demo </span>
<span class="ansi-green-intense-fg ansi-bold"> INFO     </span>| <span class="ansi-green-intense-fg ansi-bold"> applying selection to fluxes </span>
<span class="ansi-green-intense-fg ansi-bold"> INFO     </span>| <span class="ansi-green-intense-fg ansi-bold"> Detected 3223 distances </span>
<span class="ansi-green-intense-fg ansi-bold"> INFO     </span>| <span class="ansi-green-intense-fg ansi-bold"> Detected 3223 objects out to a distance of 8.44 </span>
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../_images/notebooks_aux_12_3.png" src="../_images/notebooks_aux_12_3.png" />
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[7]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">fig</span> <span class="o">=</span> <span class="n">population</span><span class="o">.</span><span class="n">display_fluxes</span><span class="p">(</span><span class="n">obs_color</span><span class="o">=</span><span class="n">purple</span><span class="p">,</span> <span class="n">true_color</span><span class="o">=</span><span class="n">yellow</span><span class="p">,</span> <span class="n">s</span><span class="o">=</span><span class="mi">15</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../_images/notebooks_aux_13_0.png" src="../_images/notebooks_aux_13_0.png" />
</div>
</div>
<p>We can see that the population has stored out demo auxiliary property.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[8]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">all_demo</span> <span class="o">=</span> <span class="n">population</span><span class="o">.</span><span class="n">demo</span>

<span class="n">selected_demo</span> <span class="o">=</span> <span class="n">population</span><span class="o">.</span><span class="n">demo</span><span class="o">.</span><span class="n">selected</span>
</pre></div>
</div>
</div>
<p>We can also see that our demo sampler is now known which is important when creating populations from YAML files. This registering happens when we add the property <code class="docutils literal notranslate"><span class="pre">_auxiliary_sampler_name</span> <span class="pre">=</span> <span class="pre">&quot;DemoSampler&quot;</span></code> which must be name of the class!</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[9]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">popsynth</span><span class="o">.</span><span class="n">list_available_auxiliary_samplers</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
DeltaAuxSampler
LogNormalAuxSampler
Log10NormalAuxSampler
NormalAuxSampler
ParetoAuxSampler
PowerLawAuxSampler
BrokenPowerLawAuxSampler
TruncatedNormalAuxSampler
ViewingAngleSampler
DemoSampler
</pre></div></div>
</div>
</section>
<section id="Observed-auxiliary-properties-and-dependent-parameters">
<h2>Observed auxiliary properties and dependent parameters<a class="headerlink" href="#Observed-auxiliary-properties-and-dependent-parameters" title="Permalink to this headline"></a></h2>
<p>Suppose now we want to simulate a property that is observed by an instrument but depends on latent parameters.</p>
<p>We will create a second demo sampler and tell it what the observational error is as well as how to read from a secondary sampler:</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[10]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">DemoSampler2</span><span class="p">(</span><span class="n">popsynth</span><span class="o">.</span><span class="n">AuxiliarySampler</span><span class="p">):</span>
    <span class="n">_auxiliary_sampler_name</span> <span class="o">=</span> <span class="s2">&quot;DemoSampler2&quot;</span>
    <span class="n">mu</span> <span class="o">=</span> <span class="n">popsynth</span><span class="o">.</span><span class="n">auxiliary_sampler</span><span class="o">.</span><span class="n">AuxiliaryParameter</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
    <span class="n">tau</span> <span class="o">=</span> <span class="n">popsynth</span><span class="o">.</span><span class="n">auxiliary_sampler</span><span class="o">.</span><span class="n">AuxiliaryParameter</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">vmin</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
    <span class="n">sigma</span> <span class="o">=</span> <span class="n">popsynth</span><span class="o">.</span><span class="n">auxiliary_sampler</span><span class="o">.</span><span class="n">AuxiliaryParameter</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">vmin</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
    <span class="p">):</span>

        <span class="c1"># this time set observed=True</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">DemoSampler2</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="s2">&quot;demo2&quot;</span><span class="p">,</span> <span class="n">observed</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">uses_distance</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">true_sampler</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">size</span><span class="p">):</span>

        <span class="c1"># we access the secondary sampler dictionary. In this</span>
        <span class="c1"># case &quot;demo&quot;. This itself is a sampler with</span>
        <span class="c1"># &lt;&gt;.true_values as a parameter</span>
        <span class="n">secondary</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_secondary_samplers</span><span class="p">[</span><span class="s1">&#39;demo&#39;</span><span class="p">]</span>

        <span class="c1"># now we sample the demo2 latent values and add on the dependence of &quot;demo&quot;</span>

        <span class="n">tmp</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">normal</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">mu</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">tau</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="n">size</span><span class="p">)</span>

        <span class="c1"># for fun, we can substract the log of the distance as all</span>
        <span class="c1"># auxiliary samples know about their distances</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_true_values</span> <span class="o">=</span> <span class="n">tmp</span> <span class="o">+</span> <span class="n">secondary</span><span class="o">.</span><span class="n">true_values</span> <span class="o">-</span> <span class="n">np</span><span class="o">.</span><span class="n">log10</span><span class="p">(</span><span class="mi">1</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_distance</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">observation_sampler</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">size</span><span class="p">):</span>

        <span class="c1"># here we define the &quot;observed&quot; values, i.e., the latened values</span>
        <span class="c1"># with observational error</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_obs_values</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_true_values</span> <span class="o">+</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">normal</span><span class="p">(</span>
            <span class="mi">0</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">sigma</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="n">size</span>
        <span class="p">)</span>
</pre></div>
</div>
</div>
<p>We recreate our base sampler:</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[11]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">pop_gen</span> <span class="o">=</span> <span class="n">popsynth</span><span class="o">.</span><span class="n">populations</span><span class="o">.</span><span class="n">SchechterSFRPopulation</span><span class="p">(</span>
    <span class="n">r0</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span> <span class="n">a</span><span class="o">=</span><span class="mf">0.0157</span><span class="p">,</span> <span class="n">rise</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">decay</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">peak</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">Lmin</span><span class="o">=</span><span class="mf">1e50</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">2.0</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
<p>Now, make a new <em>demo1</em>, but this time we do not have to attach it to the base sampler. Instead, we will assign it as a secondary sampler to <em>demo2</em> and <strong>popsynth</strong> is smart enough to search for it when it draws a survey.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[12]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">demo1</span> <span class="o">=</span> <span class="n">DemoSampler</span><span class="p">()</span>


<span class="n">demo2</span> <span class="o">=</span> <span class="n">DemoSampler2</span><span class="p">()</span>

<span class="n">demo2</span><span class="o">.</span><span class="n">set_secondary_sampler</span><span class="p">(</span><span class="n">demo1</span><span class="p">)</span>

<span class="c1"># attach to the base sampler</span>
<span class="n">pop_gen</span><span class="o">.</span><span class="n">add_observed_quantity</span><span class="p">(</span><span class="n">demo2</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
<span class="ansi-green-intense-fg ansi-bold"> INFO     </span>| <span class="ansi-green-intense-fg ansi-bold"> registering auxilary sampler: demo2 </span>
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[13]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">pos</span> <span class="o">=</span> <span class="n">nx</span><span class="o">.</span><span class="n">drawing</span><span class="o">.</span><span class="n">nx_agraph</span><span class="o">.</span><span class="n">graphviz_layout</span><span class="p">(</span><span class="n">pop_gen</span><span class="o">.</span><span class="n">graph</span><span class="p">,</span> <span class="n">prog</span><span class="o">=</span><span class="s2">&quot;dot&quot;</span><span class="p">)</span>


<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>


<span class="n">nx</span><span class="o">.</span><span class="n">draw</span><span class="p">(</span><span class="n">pop_gen</span><span class="o">.</span><span class="n">graph</span><span class="p">,</span> <span class="n">with_labels</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">pos</span><span class="o">=</span><span class="n">pos</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">,</span> <span class="o">**</span><span class="n">options</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../_images/notebooks_aux_24_0.png" src="../_images/notebooks_aux_24_0.png" />
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[14]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><br/><span></span><span class="n">flux_selector</span> <span class="o">=</span> <span class="n">popsynth</span><span class="o">.</span><span class="n">HardFluxSelection</span><span class="p">()</span>
<span class="n">flux_selector</span><span class="o">.</span><span class="n">boundary</span> <span class="o">=</span> <span class="mf">1e-8</span>

<span class="n">pop_gen</span><span class="o">.</span><span class="n">set_flux_selection</span><span class="p">(</span><span class="n">flux_selector</span><span class="p">)</span>
<span class="n">population</span> <span class="o">=</span> <span class="n">pop_gen</span><span class="o">.</span><span class="n">draw_survey</span><span class="p">(</span><span class="n">flux_sigma</span><span class="o">=</span><span class="mf">0.1</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
<span class="ansi-green-intense-fg ansi-bold"> INFO     </span>| <span class="ansi-green-intense-fg ansi-bold"> The volume integral is 4760.754854 </span>
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<script type="application/vnd.jupyter.widget-view+json">{"model_id": "7063ad9fdb2442e7998164822c01f9e8", "version_major": 2, "version_minor": 0}</script></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
<span class="ansi-green-intense-fg ansi-bold"> INFO     </span>| <span class="ansi-green-intense-fg ansi-bold"> Expecting 4693 total objects </span>
<span class="ansi-green-intense-fg ansi-bold"> INFO     </span>| <span class="ansi-green-intense-fg ansi-bold"> Sampling: demo2 </span>
<span class="ansi-green-intense-fg ansi-bold"> INFO     </span>| <span class="ansi-green-intense-fg ansi-bold"> demo2 is sampling its secondary quantities </span>
<span class="ansi-green-intense-fg ansi-bold"> INFO     </span>| <span class="ansi-green-intense-fg ansi-bold"> Sampling: demo </span>
<span class="ansi-green-intense-fg ansi-bold"> INFO     </span>| <span class="ansi-green-intense-fg ansi-bold"> applying selection to fluxes </span>
<span class="ansi-green-intense-fg ansi-bold"> INFO     </span>| <span class="ansi-green-intense-fg ansi-bold"> Detected 1124 distances </span>
<span class="ansi-green-intense-fg ansi-bold"> INFO     </span>| <span class="ansi-green-intense-fg ansi-bold"> Detected 1124 objects out to a distance of 3.18 </span>
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[15]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>

<span class="n">ax</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span><span class="n">population</span><span class="o">.</span><span class="n">demo2</span><span class="o">.</span><span class="n">selected</span><span class="p">,</span> <span class="n">population</span><span class="o">.</span><span class="n">demo</span><span class="o">.</span><span class="n">selected</span><span class="p">,</span> <span class="n">c</span><span class="o">=</span><span class="n">purple</span><span class="p">,</span> <span class="n">s</span><span class="o">=</span><span class="mi">40</span><span class="p">)</span>

<span class="n">ax</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span><span class="n">population</span><span class="o">.</span><span class="n">demo2</span><span class="p">,</span> <span class="n">population</span><span class="o">.</span><span class="n">demo</span><span class="p">,</span> <span class="n">c</span><span class="o">=</span><span class="n">yellow</span><span class="p">,</span> <span class="n">s</span><span class="o">=</span><span class="mi">20</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[15]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
&lt;matplotlib.collections.PathCollection at 0x7f9b76aa2cd0&gt;
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../_images/notebooks_aux_26_1.png" src="../_images/notebooks_aux_26_1.png" />
</div>
</div>
</section>
<section id="Derived-Luminosity-sampler">
<h2>Derived Luminosity sampler<a class="headerlink" href="#Derived-Luminosity-sampler" title="Permalink to this headline"></a></h2>
<p>Sometimes, the luminosity does not come directly from a distribution. Rather, it is computed from other quantities. In these cases, we want to use the <strong>DerivedLumAuxSampler</strong> class.</p>
<p>This allows you to sample auxiliary parameters and compute a luminosity from those.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[16]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">DemoSampler3</span><span class="p">(</span><span class="n">popsynth</span><span class="o">.</span><span class="n">DerivedLumAuxSampler</span><span class="p">):</span>
    <span class="n">_auxiliary_sampler_name</span> <span class="o">=</span> <span class="s2">&quot;DemoSampler3&quot;</span>
    <span class="n">mu</span> <span class="o">=</span> <span class="n">popsynth</span><span class="o">.</span><span class="n">auxiliary_sampler</span><span class="o">.</span><span class="n">AuxiliaryParameter</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
    <span class="n">tau</span> <span class="o">=</span> <span class="n">popsynth</span><span class="o">.</span><span class="n">auxiliary_sampler</span><span class="o">.</span><span class="n">AuxiliaryParameter</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">vmin</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mu</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">tau</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">sigma</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span>

        <span class="c1"># this time set observed=True</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">DemoSampler3</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="s2">&quot;demo3&quot;</span><span class="p">,</span> <span class="n">uses_distance</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">true_sampler</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">size</span><span class="p">):</span>

        <span class="c1"># draw a random number</span>
        <span class="n">tmp</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">normal</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">mu</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">tau</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="n">size</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_true_values</span> <span class="o">=</span> <span class="n">tmp</span>

    <span class="k">def</span> <span class="nf">compute_luminosity</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="c1"># compute the luminosity</span>
        <span class="n">secondary</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_secondary_samplers</span><span class="p">[</span><span class="s2">&quot;demo&quot;</span><span class="p">]</span>

        <span class="k">return</span> <span class="p">(</span><span class="mi">10</span> <span class="o">**</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_true_values</span> <span class="o">+</span> <span class="mi">54</span><span class="p">))</span> <span class="o">+</span> <span class="n">secondary</span><span class="o">.</span><span class="n">true_values</span>
</pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[17]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">pop_gen</span> <span class="o">=</span> <span class="n">popsynth</span><span class="o">.</span><span class="n">populations</span><span class="o">.</span><span class="n">SchechterSFRPopulation</span><span class="p">(</span>
    <span class="n">r0</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span><span class="n">a</span><span class="o">=</span><span class="mf">0.0157</span><span class="p">,</span> <span class="n">rise</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">decay</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">peak</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">Lmin</span><span class="o">=</span><span class="mf">1e50</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">2.0</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[18]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">demo1</span> <span class="o">=</span> <span class="n">DemoSampler</span><span class="p">()</span>


<span class="n">demo3</span> <span class="o">=</span> <span class="n">DemoSampler3</span><span class="p">()</span>

<span class="n">demo3</span><span class="o">.</span><span class="n">set_secondary_sampler</span><span class="p">(</span><span class="n">demo1</span><span class="p">)</span>

<span class="c1"># attach to the base sampler</span>
<span class="n">pop_gen</span><span class="o">.</span><span class="n">add_observed_quantity</span><span class="p">(</span><span class="n">demo3</span><span class="p">)</span>


<span class="n">pos</span> <span class="o">=</span> <span class="n">nx</span><span class="o">.</span><span class="n">drawing</span><span class="o">.</span><span class="n">nx_agraph</span><span class="o">.</span><span class="n">graphviz_layout</span><span class="p">(</span><span class="n">pop_gen</span><span class="o">.</span><span class="n">graph</span><span class="p">,</span> <span class="n">prog</span><span class="o">=</span><span class="s2">&quot;dot&quot;</span><span class="p">)</span>

<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>

<span class="n">nx</span><span class="o">.</span><span class="n">draw</span><span class="p">(</span><span class="n">pop_gen</span><span class="o">.</span><span class="n">graph</span><span class="p">,</span> <span class="n">with_labels</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">pos</span><span class="o">=</span><span class="n">pos</span><span class="p">,</span> <span class="o">**</span><span class="n">options</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
<span class="ansi-green-intense-fg ansi-bold"> INFO     </span>| <span class="ansi-green-intense-fg ansi-bold"> registering derived luminosity sampler: demo3 </span>
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../_images/notebooks_aux_30_1.png" src="../_images/notebooks_aux_30_1.png" />
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[19]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">flux_selector</span> <span class="o">=</span> <span class="n">popsynth</span><span class="o">.</span><span class="n">HardFluxSelection</span><span class="p">()</span>
<span class="n">flux_selector</span><span class="o">.</span><span class="n">boundary</span> <span class="o">=</span> <span class="mf">1e-5</span>
<span class="n">pop_gen</span><span class="o">.</span><span class="n">set_flux_selection</span><span class="p">(</span><span class="n">flux_selector</span><span class="p">)</span>
<span class="n">population</span> <span class="o">=</span> <span class="n">pop_gen</span><span class="o">.</span><span class="n">draw_survey</span><span class="p">(</span><span class="n">flux_sigma</span><span class="o">=</span><span class="mf">0.1</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
<span class="ansi-green-intense-fg ansi-bold"> INFO     </span>| <span class="ansi-green-intense-fg ansi-bold"> The volume integral is 4760.754854 </span>
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<script type="application/vnd.jupyter.widget-view+json">{"model_id": "ce551c3a96d24051a4b3cdac1ccaa95c", "version_major": 2, "version_minor": 0}</script></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
<span class="ansi-green-intense-fg ansi-bold"> INFO     </span>| <span class="ansi-green-intense-fg ansi-bold"> Expecting 4693 total objects </span>
<span class="ansi-green-intense-fg ansi-bold"> INFO     </span>| <span class="ansi-green-intense-fg ansi-bold"> Sampling: demo3 </span>
<span class="ansi-green-intense-fg ansi-bold"> INFO     </span>| <span class="ansi-green-intense-fg ansi-bold"> demo3 is sampling its secondary quantities </span>
<span class="ansi-green-intense-fg ansi-bold"> INFO     </span>| <span class="ansi-green-intense-fg ansi-bold"> Sampling: demo </span>
<span class="ansi-green-intense-fg ansi-bold"> INFO     </span>| <span class="ansi-green-intense-fg ansi-bold"> Getting luminosity from derived sampler </span>
<span class="ansi-green-intense-fg ansi-bold"> INFO     </span>| <span class="ansi-green-intense-fg ansi-bold"> applying selection to fluxes </span>
<span class="ansi-green-intense-fg ansi-bold"> INFO     </span>| <span class="ansi-green-intense-fg ansi-bold"> Detected 3752 distances </span>
<span class="ansi-green-intense-fg ansi-bold"> INFO     </span>| <span class="ansi-green-intense-fg ansi-bold"> Detected 3752 objects out to a distance of 9.99 </span>
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[20]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">population</span><span class="o">.</span><span class="n">display_fluxes</span><span class="p">(</span><span class="n">obs_color</span><span class="o">=</span><span class="n">purple</span><span class="p">,</span> <span class="n">true_color</span><span class="o">=</span><span class="n">yellow</span><span class="p">,</span> <span class="n">s</span><span class="o">=</span><span class="mi">15</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[20]:
</pre></div>
</div>
<div class="output_area docutils container">
<img alt="../_images/notebooks_aux_32_0.png" src="../_images/notebooks_aux_32_0.png" />
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../_images/notebooks_aux_32_1.png" src="../_images/notebooks_aux_32_1.png" />
</div>
</div>
<script type="application/vnd.jupyter.widget-state+json">
{"state": {"03fa4dbd52e54e61ac54359452126e9d": {"model_module": "@jupyter-widgets/base", "model_module_version": "1.2.0", "model_name": "LayoutModel", "state": {"_model_module": "@jupyter-widgets/base", "_model_module_version": "1.2.0", "_model_name": "LayoutModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "1.2.0", "_view_name": "LayoutView", "align_content": null, "align_items": null, "align_self": null, "border": null, "bottom": null, "display": null, "flex": null, "flex_flow": null, "grid_area": null, "grid_auto_columns": null, "grid_auto_flow": null, "grid_auto_rows": null, "grid_column": null, "grid_gap": null, "grid_row": null, "grid_template_areas": null, "grid_template_columns": null, "grid_template_rows": null, "height": null, "justify_content": null, "justify_items": null, "left": null, "margin": null, "max_height": null, "max_width": null, "min_height": null, "min_width": null, "object_fit": null, "object_position": null, "order": null, "overflow": null, "overflow_x": null, "overflow_y": null, "padding": null, "right": null, "top": null, "visibility": null, "width": null}}, "05cfa413cade4c4682d28aeeed560f2f": {"model_module": "@jupyter-widgets/controls", "model_module_version": "1.5.0", "model_name": "FloatProgressModel", "state": {"_dom_classes": [], "_model_module": "@jupyter-widgets/controls", "_model_module_version": "1.5.0", "_model_name": "FloatProgressModel", "_view_count": null, "_view_module": "@jupyter-widgets/controls", "_view_module_version": "1.5.0", "_view_name": "ProgressView", "bar_style": "success", "description": "", "description_tooltip": null, "layout": "IPY_MODEL_882a0acba26546f8992f8514ec0f997e", "max": 4693.0, "min": 0.0, "orientation": "horizontal", "style": "IPY_MODEL_9f4183a7c15d4d24909950048ff53845", "value": 4693.0}}, "09d7e50b09de4b8689583dd1d48af9c5": {"model_module": "@jupyter-widgets/controls", "model_module_version": "1.5.0", "model_name": "HTMLModel", "state": {"_dom_classes": [], "_model_module": "@jupyter-widgets/controls", "_model_module_version": "1.5.0", "_model_name": "HTMLModel", "_view_count": null, "_view_module": "@jupyter-widgets/controls", "_view_module_version": "1.5.0", "_view_name": "HTMLView", "description": "", "description_tooltip": null, "layout": "IPY_MODEL_333df420017c472e86ddb493891c7d0e", "placeholder": "\u200b", "style": "IPY_MODEL_8f3c282e94ff4c6bab8b44c6c300a0c9", "value": " 4693/4693 [00:00&lt;00:00, 34535.50it/s]"}}, "0a63e8bb2c8c4e1eb11b0698f45a2683": {"model_module": "@jupyter-widgets/base", "model_module_version": "1.2.0", "model_name": "LayoutModel", "state": {"_model_module": "@jupyter-widgets/base", "_model_module_version": "1.2.0", "_model_name": "LayoutModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "1.2.0", "_view_name": "LayoutView", "align_content": null, "align_items": null, "align_self": null, "border": null, "bottom": null, "display": null, "flex": null, "flex_flow": null, "grid_area": null, "grid_auto_columns": null, "grid_auto_flow": null, "grid_auto_rows": null, "grid_column": null, "grid_gap": null, "grid_row": null, "grid_template_areas": null, "grid_template_columns": null, "grid_template_rows": null, "height": null, "justify_content": null, "justify_items": null, "left": null, "margin": null, "max_height": null, "max_width": null, "min_height": null, "min_width": null, "object_fit": null, "object_position": null, "order": null, "overflow": null, "overflow_x": null, "overflow_y": null, "padding": null, "right": null, "top": null, "visibility": null, "width": null}}, "0ef9ee576a524365b77f0cf165cab0bc": {"model_module": "@jupyter-widgets/controls", "model_module_version": "1.5.0", "model_name": "HTMLModel", "state": {"_dom_classes": [], "_model_module": "@jupyter-widgets/controls", "_model_module_version": "1.5.0", "_model_name": "HTMLModel", "_view_count": null, "_view_module": "@jupyter-widgets/controls", "_view_module_version": "1.5.0", "_view_name": "HTMLView", "description": "", "description_tooltip": null, "layout": "IPY_MODEL_d42f40e8d52740e6b78cc16efda8f788", "placeholder": "\u200b", "style": "IPY_MODEL_d7f0738bdb184ca28078c6122090e148", "value": "Drawing distances: 100%"}}, "0f7ce4ce04eb415fa0ceea824d0fed43": {"model_module": "@jupyter-widgets/controls", "model_module_version": "1.5.0", "model_name": "DescriptionStyleModel", "state": {"_model_module": "@jupyter-widgets/controls", "_model_module_version": "1.5.0", "_model_name": "DescriptionStyleModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "1.2.0", "_view_name": "StyleView", "description_width": ""}}, "26c184f3ee4c462f9f8785121628d9e2": {"model_module": "@jupyter-widgets/controls", "model_module_version": "1.5.0", "model_name": "HTMLModel", "state": {"_dom_classes": [], "_model_module": "@jupyter-widgets/controls", "_model_module_version": "1.5.0", "_model_name": "HTMLModel", "_view_count": null, "_view_module": "@jupyter-widgets/controls", "_view_module_version": "1.5.0", "_view_name": "HTMLView", "description": "", "description_tooltip": null, "layout": "IPY_MODEL_8052cbeba66a4841998634068744a15f", "placeholder": "\u200b", "style": "IPY_MODEL_8f74b4a92f8a44a4a3d754cbde7a4838", "value": "Drawing distances: 100%"}}, "290450f20082437994e3c8482c4692e9": {"model_module": "@jupyter-widgets/controls", "model_module_version": "1.5.0", "model_name": "HTMLModel", "state": {"_dom_classes": [], "_model_module": "@jupyter-widgets/controls", "_model_module_version": "1.5.0", "_model_name": "HTMLModel", "_view_count": null, "_view_module": "@jupyter-widgets/controls", "_view_module_version": "1.5.0", "_view_name": "HTMLView", "description": "", "description_tooltip": null, "layout": "IPY_MODEL_a6a8c6c633754d41b06ac1593230bbd0", "placeholder": "\u200b", "style": "IPY_MODEL_db37a0740e5a4e329258e2fb4478a63a", "value": " 4693/4693 [00:00&lt;00:00, 34940.29it/s]"}}, "333df420017c472e86ddb493891c7d0e": {"model_module": "@jupyter-widgets/base", "model_module_version": "1.2.0", "model_name": "LayoutModel", "state": {"_model_module": "@jupyter-widgets/base", "_model_module_version": "1.2.0", "_model_name": "LayoutModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "1.2.0", "_view_name": "LayoutView", "align_content": null, "align_items": null, "align_self": null, "border": null, "bottom": null, "display": null, "flex": null, "flex_flow": null, "grid_area": null, "grid_auto_columns": null, "grid_auto_flow": null, "grid_auto_rows": null, "grid_column": null, "grid_gap": null, "grid_row": null, "grid_template_areas": null, "grid_template_columns": null, "grid_template_rows": null, "height": null, "justify_content": null, "justify_items": null, "left": null, "margin": null, "max_height": null, "max_width": null, "min_height": null, "min_width": null, "object_fit": null, "object_position": null, "order": null, "overflow": null, "overflow_x": null, "overflow_y": null, "padding": null, "right": null, "top": null, "visibility": null, "width": null}}, "3340291e31374a5fa165dbbba21a730d": {"model_module": "@jupyter-widgets/controls", "model_module_version": "1.5.0", "model_name": "HTMLModel", "state": {"_dom_classes": [], "_model_module": "@jupyter-widgets/controls", "_model_module_version": "1.5.0", "_model_name": "HTMLModel", "_view_count": null, "_view_module": "@jupyter-widgets/controls", "_view_module_version": "1.5.0", "_view_name": "HTMLView", "description": "", "description_tooltip": null, "layout": "IPY_MODEL_f225b80e6ea04fcea0c168faa98c1bfb", "placeholder": "\u200b", "style": "IPY_MODEL_0f7ce4ce04eb415fa0ceea824d0fed43", "value": " 4693/4693 [00:00&lt;00:00, 32435.03it/s]"}}, "37a3ea88851e41908c737734d9671e6b": {"model_module": "@jupyter-widgets/base", "model_module_version": "1.2.0", "model_name": "LayoutModel", "state": {"_model_module": "@jupyter-widgets/base", "_model_module_version": "1.2.0", "_model_name": "LayoutModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "1.2.0", "_view_name": "LayoutView", "align_content": null, "align_items": null, "align_self": null, "border": null, "bottom": null, "display": null, "flex": null, "flex_flow": null, "grid_area": null, "grid_auto_columns": null, "grid_auto_flow": null, "grid_auto_rows": null, "grid_column": null, "grid_gap": null, "grid_row": null, "grid_template_areas": null, "grid_template_columns": null, "grid_template_rows": null, "height": null, "justify_content": null, "justify_items": null, "left": null, "margin": null, "max_height": null, "max_width": null, "min_height": null, "min_width": null, "object_fit": null, "object_position": null, "order": null, "overflow": null, "overflow_x": null, "overflow_y": null, "padding": null, "right": null, "top": null, "visibility": null, "width": null}}, "4322dae2f1fb4deabce03c1374a69c7e": {"model_module": "@jupyter-widgets/controls", "model_module_version": "1.5.0", "model_name": "FloatProgressModel", "state": {"_dom_classes": [], "_model_module": "@jupyter-widgets/controls", "_model_module_version": "1.5.0", "_model_name": "FloatProgressModel", "_view_count": null, "_view_module": "@jupyter-widgets/controls", "_view_module_version": "1.5.0", "_view_name": "ProgressView", "bar_style": "success", "description": "", "description_tooltip": null, "layout": "IPY_MODEL_aab3f0b4c4bd41529af4c8e36908bfd6", "max": 4693.0, "min": 0.0, "orientation": "horizontal", "style": "IPY_MODEL_d2fb42466d5840b8bdc925867c4da2b6", "value": 4693.0}}, "564e1c90699d4e66ac24663f04654c93": {"model_module": "@jupyter-widgets/controls", "model_module_version": "1.5.0", "model_name": "ProgressStyleModel", "state": {"_model_module": "@jupyter-widgets/controls", "_model_module_version": "1.5.0", "_model_name": "ProgressStyleModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "1.2.0", "_view_name": "StyleView", "bar_color": "#B833FF", "description_width": ""}}, "7063ad9fdb2442e7998164822c01f9e8": {"model_module": "@jupyter-widgets/controls", "model_module_version": "1.5.0", "model_name": "HBoxModel", "state": {"_dom_classes": [], "_model_module": "@jupyter-widgets/controls", "_model_module_version": "1.5.0", "_model_name": "HBoxModel", "_view_count": null, "_view_module": "@jupyter-widgets/controls", "_view_module_version": "1.5.0", "_view_name": "HBoxView", "box_style": "", "children": ["IPY_MODEL_26c184f3ee4c462f9f8785121628d9e2", "IPY_MODEL_8f1c49c8254e499fbd8ceebe149cce25", "IPY_MODEL_3340291e31374a5fa165dbbba21a730d"], "layout": "IPY_MODEL_0a63e8bb2c8c4e1eb11b0698f45a2683"}}, "8052cbeba66a4841998634068744a15f": {"model_module": "@jupyter-widgets/base", "model_module_version": "1.2.0", "model_name": "LayoutModel", "state": {"_model_module": "@jupyter-widgets/base", "_model_module_version": "1.2.0", "_model_name": "LayoutModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "1.2.0", "_view_name": "LayoutView", "align_content": null, "align_items": null, "align_self": null, "border": null, "bottom": null, "display": null, "flex": null, "flex_flow": null, "grid_area": null, "grid_auto_columns": null, "grid_auto_flow": null, "grid_auto_rows": null, "grid_column": null, "grid_gap": null, "grid_row": null, "grid_template_areas": null, "grid_template_columns": null, "grid_template_rows": null, "height": null, "justify_content": null, "justify_items": null, "left": null, "margin": null, "max_height": null, "max_width": null, "min_height": null, "min_width": null, "object_fit": null, "object_position": null, "order": null, "overflow": null, "overflow_x": null, "overflow_y": null, "padding": null, "right": null, "top": null, "visibility": null, "width": null}}, "8801009452d84a838fef94c35e1635be": {"model_module": "@jupyter-widgets/controls", "model_module_version": "1.5.0", "model_name": "HBoxModel", "state": {"_dom_classes": [], "_model_module": "@jupyter-widgets/controls", "_model_module_version": "1.5.0", "_model_name": "HBoxModel", "_view_count": null, "_view_module": "@jupyter-widgets/controls", "_view_module_version": "1.5.0", "_view_name": "HBoxView", "box_style": "", "children": ["IPY_MODEL_0ef9ee576a524365b77f0cf165cab0bc", "IPY_MODEL_4322dae2f1fb4deabce03c1374a69c7e", "IPY_MODEL_290450f20082437994e3c8482c4692e9"], "layout": "IPY_MODEL_aaf3fb40790b40e6b085ba633e8d3836"}}, "882a0acba26546f8992f8514ec0f997e": {"model_module": "@jupyter-widgets/base", "model_module_version": "1.2.0", "model_name": "LayoutModel", "state": {"_model_module": "@jupyter-widgets/base", "_model_module_version": "1.2.0", "_model_name": "LayoutModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "1.2.0", "_view_name": "LayoutView", "align_content": null, "align_items": null, "align_self": null, "border": null, "bottom": null, "display": null, "flex": null, "flex_flow": null, "grid_area": null, "grid_auto_columns": null, "grid_auto_flow": null, "grid_auto_rows": null, "grid_column": null, "grid_gap": null, "grid_row": null, "grid_template_areas": null, "grid_template_columns": null, "grid_template_rows": null, "height": null, "justify_content": null, "justify_items": null, "left": null, "margin": null, "max_height": null, "max_width": null, "min_height": null, "min_width": null, "object_fit": null, "object_position": null, "order": null, "overflow": null, "overflow_x": null, "overflow_y": null, "padding": null, "right": null, "top": null, "visibility": null, "width": null}}, "8f1c49c8254e499fbd8ceebe149cce25": {"model_module": "@jupyter-widgets/controls", "model_module_version": "1.5.0", "model_name": "FloatProgressModel", "state": {"_dom_classes": [], "_model_module": "@jupyter-widgets/controls", "_model_module_version": "1.5.0", "_model_name": "FloatProgressModel", "_view_count": null, "_view_module": "@jupyter-widgets/controls", "_view_module_version": "1.5.0", "_view_name": "ProgressView", "bar_style": "success", "description": "", "description_tooltip": null, "layout": "IPY_MODEL_03fa4dbd52e54e61ac54359452126e9d", "max": 4693.0, "min": 0.0, "orientation": "horizontal", "style": "IPY_MODEL_564e1c90699d4e66ac24663f04654c93", "value": 4693.0}}, "8f3c282e94ff4c6bab8b44c6c300a0c9": {"model_module": "@jupyter-widgets/controls", "model_module_version": "1.5.0", "model_name": "DescriptionStyleModel", "state": {"_model_module": "@jupyter-widgets/controls", "_model_module_version": "1.5.0", "_model_name": "DescriptionStyleModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "1.2.0", "_view_name": "StyleView", "description_width": ""}}, "8f74b4a92f8a44a4a3d754cbde7a4838": {"model_module": "@jupyter-widgets/controls", "model_module_version": "1.5.0", "model_name": "DescriptionStyleModel", "state": {"_model_module": "@jupyter-widgets/controls", "_model_module_version": "1.5.0", "_model_name": "DescriptionStyleModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "1.2.0", "_view_name": "StyleView", "description_width": ""}}, "9ebbe6cea1cd413caca51bc346114a6f": {"model_module": "@jupyter-widgets/base", "model_module_version": "1.2.0", "model_name": "LayoutModel", "state": {"_model_module": "@jupyter-widgets/base", "_model_module_version": "1.2.0", "_model_name": "LayoutModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "1.2.0", "_view_name": "LayoutView", "align_content": null, "align_items": null, "align_self": null, "border": null, "bottom": null, "display": null, "flex": null, "flex_flow": null, "grid_area": null, "grid_auto_columns": null, "grid_auto_flow": null, "grid_auto_rows": null, "grid_column": null, "grid_gap": null, "grid_row": null, "grid_template_areas": null, "grid_template_columns": null, "grid_template_rows": null, "height": null, "justify_content": null, "justify_items": null, "left": null, "margin": null, "max_height": null, "max_width": null, "min_height": null, "min_width": null, "object_fit": null, "object_position": null, "order": null, "overflow": null, "overflow_x": null, "overflow_y": null, "padding": null, "right": null, "top": null, "visibility": null, "width": null}}, "9f4183a7c15d4d24909950048ff53845": {"model_module": "@jupyter-widgets/controls", "model_module_version": "1.5.0", "model_name": "ProgressStyleModel", "state": {"_model_module": "@jupyter-widgets/controls", "_model_module_version": "1.5.0", "_model_name": "ProgressStyleModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "1.2.0", "_view_name": "StyleView", "bar_color": "#B833FF", "description_width": ""}}, "a6a8c6c633754d41b06ac1593230bbd0": {"model_module": "@jupyter-widgets/base", "model_module_version": "1.2.0", "model_name": "LayoutModel", "state": {"_model_module": "@jupyter-widgets/base", "_model_module_version": "1.2.0", "_model_name": "LayoutModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "1.2.0", "_view_name": "LayoutView", "align_content": null, "align_items": null, "align_self": null, "border": null, "bottom": null, "display": null, "flex": null, "flex_flow": null, "grid_area": null, "grid_auto_columns": null, "grid_auto_flow": null, "grid_auto_rows": null, "grid_column": null, "grid_gap": null, "grid_row": null, "grid_template_areas": null, "grid_template_columns": null, "grid_template_rows": null, "height": null, "justify_content": null, "justify_items": null, "left": null, "margin": null, "max_height": null, "max_width": null, "min_height": null, "min_width": null, "object_fit": null, "object_position": null, "order": null, "overflow": null, "overflow_x": null, "overflow_y": null, "padding": null, "right": null, "top": null, "visibility": null, "width": null}}, "aab3f0b4c4bd41529af4c8e36908bfd6": {"model_module": "@jupyter-widgets/base", "model_module_version": "1.2.0", "model_name": "LayoutModel", "state": {"_model_module": "@jupyter-widgets/base", "_model_module_version": "1.2.0", "_model_name": "LayoutModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "1.2.0", "_view_name": "LayoutView", "align_content": null, "align_items": null, "align_self": null, "border": null, "bottom": null, "display": null, "flex": null, "flex_flow": null, "grid_area": null, "grid_auto_columns": null, "grid_auto_flow": null, "grid_auto_rows": null, "grid_column": null, "grid_gap": null, "grid_row": null, "grid_template_areas": null, "grid_template_columns": null, "grid_template_rows": null, "height": null, "justify_content": null, "justify_items": null, "left": null, "margin": null, "max_height": null, "max_width": null, "min_height": null, "min_width": null, "object_fit": null, "object_position": null, "order": null, "overflow": null, "overflow_x": null, "overflow_y": null, "padding": null, "right": null, "top": null, "visibility": null, "width": null}}, "aaf3fb40790b40e6b085ba633e8d3836": {"model_module": "@jupyter-widgets/base", "model_module_version": "1.2.0", "model_name": "LayoutModel", "state": {"_model_module": "@jupyter-widgets/base", "_model_module_version": "1.2.0", "_model_name": "LayoutModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "1.2.0", "_view_name": "LayoutView", "align_content": null, "align_items": null, "align_self": null, "border": null, "bottom": null, "display": null, "flex": null, "flex_flow": null, "grid_area": null, "grid_auto_columns": null, "grid_auto_flow": null, "grid_auto_rows": null, "grid_column": null, "grid_gap": null, "grid_row": null, "grid_template_areas": null, "grid_template_columns": null, "grid_template_rows": null, "height": null, "justify_content": null, "justify_items": null, "left": null, "margin": null, "max_height": null, "max_width": null, "min_height": null, "min_width": null, "object_fit": null, "object_position": null, "order": null, "overflow": null, "overflow_x": null, "overflow_y": null, "padding": null, "right": null, "top": null, "visibility": null, "width": null}}, "b187a2056aeb4614b59f12f3a490118c": {"model_module": "@jupyter-widgets/controls", "model_module_version": "1.5.0", "model_name": "DescriptionStyleModel", "state": {"_model_module": "@jupyter-widgets/controls", "_model_module_version": "1.5.0", "_model_name": "DescriptionStyleModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "1.2.0", "_view_name": "StyleView", "description_width": ""}}, "b3ffc354d08345d8b38775511e2340aa": {"model_module": "@jupyter-widgets/controls", "model_module_version": "1.5.0", "model_name": "HTMLModel", "state": {"_dom_classes": [], "_model_module": "@jupyter-widgets/controls", "_model_module_version": "1.5.0", "_model_name": "HTMLModel", "_view_count": null, "_view_module": "@jupyter-widgets/controls", "_view_module_version": "1.5.0", "_view_name": "HTMLView", "description": "", "description_tooltip": null, "layout": "IPY_MODEL_37a3ea88851e41908c737734d9671e6b", "placeholder": "\u200b", "style": "IPY_MODEL_b187a2056aeb4614b59f12f3a490118c", "value": "Drawing distances: 100%"}}, "ce551c3a96d24051a4b3cdac1ccaa95c": {"model_module": "@jupyter-widgets/controls", "model_module_version": "1.5.0", "model_name": "HBoxModel", "state": {"_dom_classes": [], "_model_module": "@jupyter-widgets/controls", "_model_module_version": "1.5.0", "_model_name": "HBoxModel", "_view_count": null, "_view_module": "@jupyter-widgets/controls", "_view_module_version": "1.5.0", "_view_name": "HBoxView", "box_style": "", "children": ["IPY_MODEL_b3ffc354d08345d8b38775511e2340aa", "IPY_MODEL_05cfa413cade4c4682d28aeeed560f2f", "IPY_MODEL_09d7e50b09de4b8689583dd1d48af9c5"], "layout": "IPY_MODEL_9ebbe6cea1cd413caca51bc346114a6f"}}, "d2fb42466d5840b8bdc925867c4da2b6": {"model_module": "@jupyter-widgets/controls", "model_module_version": "1.5.0", "model_name": "ProgressStyleModel", "state": {"_model_module": "@jupyter-widgets/controls", "_model_module_version": "1.5.0", "_model_name": "ProgressStyleModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "1.2.0", "_view_name": "StyleView", "bar_color": "#B833FF", "description_width": ""}}, "d42f40e8d52740e6b78cc16efda8f788": {"model_module": "@jupyter-widgets/base", "model_module_version": "1.2.0", "model_name": "LayoutModel", "state": {"_model_module": "@jupyter-widgets/base", "_model_module_version": "1.2.0", "_model_name": "LayoutModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "1.2.0", "_view_name": "LayoutView", "align_content": null, "align_items": null, "align_self": null, "border": null, "bottom": null, "display": null, "flex": null, "flex_flow": null, "grid_area": null, "grid_auto_columns": null, "grid_auto_flow": null, "grid_auto_rows": null, "grid_column": null, "grid_gap": null, "grid_row": null, "grid_template_areas": null, "grid_template_columns": null, "grid_template_rows": null, "height": null, "justify_content": null, "justify_items": null, "left": null, "margin": null, "max_height": null, "max_width": null, "min_height": null, "min_width": null, "object_fit": null, "object_position": null, "order": null, "overflow": null, "overflow_x": null, "overflow_y": null, "padding": null, "right": null, "top": null, "visibility": null, "width": null}}, "d7f0738bdb184ca28078c6122090e148": {"model_module": "@jupyter-widgets/controls", "model_module_version": "1.5.0", "model_name": "DescriptionStyleModel", "state": {"_model_module": "@jupyter-widgets/controls", "_model_module_version": "1.5.0", "_model_name": "DescriptionStyleModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "1.2.0", "_view_name": "StyleView", "description_width": ""}}, "db37a0740e5a4e329258e2fb4478a63a": {"model_module": "@jupyter-widgets/controls", "model_module_version": "1.5.0", "model_name": "DescriptionStyleModel", "state": {"_model_module": "@jupyter-widgets/controls", "_model_module_version": "1.5.0", "_model_name": "DescriptionStyleModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "1.2.0", "_view_name": "StyleView", "description_width": ""}}, "f225b80e6ea04fcea0c168faa98c1bfb": {"model_module": "@jupyter-widgets/base", "model_module_version": "1.2.0", "model_name": "LayoutModel", "state": {"_model_module": "@jupyter-widgets/base", "_model_module_version": "1.2.0", "_model_name": "LayoutModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "1.2.0", "_view_name": "LayoutView", "align_content": null, "align_items": null, "align_self": null, "border": null, "bottom": null, "display": null, "flex": null, "flex_flow": null, "grid_area": null, "grid_auto_columns": null, "grid_auto_flow": null, "grid_auto_rows": null, "grid_column": null, "grid_gap": null, "grid_row": null, "grid_template_areas": null, "grid_template_columns": null, "grid_template_rows": null, "height": null, "justify_content": null, "justify_items": null, "left": null, "margin": null, "max_height": null, "max_width": null, "min_height": null, "min_width": null, "object_fit": null, "object_position": null, "order": null, "overflow": null, "overflow_x": null, "overflow_y": null, "padding": null, "right": null, "top": null, "visibility": null, "width": null}}}, "version_major": 2, "version_minor": 0}
</script></section>
</section>


           </div>
          </div>

          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="selections.html" class="btn btn-neutral float-left" title="Selections" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="contribute.html" class="btn btn-neutral float-right" title="Contributing" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2019, J. Michael Burgess.</p>
  </div>

   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>